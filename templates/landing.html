<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="naver-site-verification" content="eb8016dc00057f4fdb6cb38e81cb7e507a4e1886" />
    <meta name="google-site-verification" content="rrMaS_Uo8i_SC9M4XfatAMijOT2vpn7vkm1x6FKuQbk" />
    
    <title>Danso AI - AI Powered Scalping Signals</title>

    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='images/favicon-96x96.png') }}">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/favicon.svg') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
    
</head>
<body>

    <div class="layered-curl-header"></div>

    <div id="video-container">

    <canvas id="heroCanvas"></canvas>

    <div class="content-wrapper">

        <div id="video-container">
            <video id="intro-video" 
                   src="{{ url_for('static', filename='videos/danso_promo.mp4') }}" 
                   autoplay 
                   muted 
                   playsinline>
            </video>
        </div>

        <div id="main-content">
            
            <header class="landing-header landing-container">
                <div class="header-logo">
                    <img src="{{ url_for('static', filename='images/danso_logo.png') }}" alt="Danso Logo">
                </div>
                <nav class="header-nav">
                     <a href="/login" class="nav-button secondary">Login</a> 
                     <a href="/signup" class="nav-button primary">Sign Up</a> 
                </nav>
            </header>

            <section class="hero-section landing-container">
                <div class="hero-content">
                    <span class="hero-subtitle-text">HERO SECTION</span>
                    <h1 class="hero-title">Danso AI -<br>AI Powered Scalping Signals</h1>
                    <p class="hero-description">The AI watcher monitors the market for high-probability signals, so you don't have to.</p>
                    <div class="hero-cta-buttons">
                        <a href="/dashboard" class="cta-button primary">Access Dashboard</a>
                        <a href="#features" class="cta-button secondary">Learn More</a>
                    </div>
                </div>
                
                <div class="hero-feed-vertical">
                    <h3 class="widget-title">Live Top Gainers</h3>
                    <div class="vertical-scroll-container">
                        <div id="vertical-ticker-list">
                            <p class_="loading-text">Loading signals...</p>
                        </div>
                    </div>
                </div>
            </section>

            <div class="lower-content-wrapper">

                <section class="features-section landing-container" id="features">
                    <h2 class="section-title">Why Danso?</h2>
                    <div class="features-grid">
                        
                        <div class="feature-card">
                            <span class="hero-subtitle-text">AI-DRIVEN WATCHER</span>
                            <h3>AI-Driven Watcher</h3>
                            <p>Our core AI ("The Watcher") filters market noise to find high-probability scalping opportunities (Pattern A/B).</p>
                        </div>
                        
                        <div class="feature-card">
                            <span class="hero-subtitle-text">REAL-TIME SIGNALS</span>
                            <h3>Real-Time Signals</h3>
                            <p>No delays. Get instant push notifications the moment a high-probability signal is detected by the engine.</p>
                        </div>
                        
                        <div class="feature-card">
                            <span class="hero-subtitle-text">COMMUNITY INSIGHTS</span>
                            <h3>Community Insights</h3>
                            <p>Share feedback, discuss signals, and grow with a community of traders all focused on the same goal.</p>
                        </div>

                    </div>
                </section>
                
                <footer class="landing-footer landing-container">
                    <p>© 2025 Danso. All rights reserved.</p>
                </footer>

            </div> 
        </div> </div> 
        </div> 
    </div> 

    <div id="landingPopup" class="popup-overlay">
        <div class="popup-content">
            <div class="popup-header">
                <h2>Launch Special Access</h2>
                <button class="close-btn" onclick="closePopup()">×</button>
            </div>
            
            <div class="popup-body">
                <div class="popup-section highlight-box">
                    <h3 class="neon-accent">1-Week Free Trial</h3>
                    <p class="main-desc">Full access is complimentary until <strong>next Monday</strong>.</p>
                    <ul class="clean-list">
                        <li><span class="accent-dot"></span> Converts to paid membership afterwards.</li>
                        <li><span class="accent-dot"></span> Limited to the first 1,000 users.</li>
                    </ul>
                </div>

                <div class="popup-section">
                    <h3 class="neon-accent">Getting Started</h3>
                    <ol class="clean-ol">
                        <li>Log in and access the <strong>Dashboard</strong>.</li>
                        <li>Enable **Notifications** to receive signals.</li>
                        <li>Monitor real-time AI detection.</li>
                    </ol>
                </div>

                <div class="popup-section">
                    <h3 class="neon-accent">Web App Installation</h3>
                    <div class="install-guide">
                        <div class="guide-item">
                            <span class="os-label">iOS (Safari)</span>
                            <p>Tap 'Share' icon → Select 'Add to Home Screen'</p>
                        </div>
                        <div class="guide-item">
                            <span class="os-label">Android (Chrome)</span>
                            <p>Tap menu icon → Select 'Install App'</p>
                        </div>
                    </div>
                </div>

                <div class="popup-section footer-info">
                    <p class="disclaimer">Trading involves risk. AI analysis does not guarantee results.</p>
                    <p class="contact">Support: dansoweb@gmail.com</p>
                </div>
            </div>

            <div class="popup-footer">
                <label class="dont-show">
                    <input type="checkbox" id="dontShowToday"> Don't show again today
                </label>
                <button class="confirm-btn" onclick="closePopup()">ENTER DASHBOARD</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            // --- [기존 비디오/티커 로직] ---
            const videoContainer = document.getElementById('video-container');
            const video = document.getElementById('intro-video');
            const mainContent = document.getElementById('main-content');

            function showMainContent() {
                if (!mainContent.classList.contains('visible')) {
                    videoContainer.classList.add('fade-out');
                    mainContent.classList.add('visible');
                    document.body.style.overflowY = 'auto'; 
                    loadVerticalTicker(); 
                }
            }

            if(video) {
                video.onended = () => { showMainContent(); };
                video.onerror = () => { showMainContent(); };
            }
            setTimeout(() => { showMainContent(); }, 4000); 

            function loadVerticalTicker() {
                const list = document.getElementById('vertical-ticker-list');
                if(!list) return;
                
                fetch('/api/market_overview')
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'OK' && data.gainers && data.gainers.length > 0) {
                            list.innerHTML = ''; 
                            const gainers = data.gainers.slice(0, 15);
                            const fullList = [...gainers, ...gainers]; 
                            
                            fullList.forEach(ticker => {
                                const item = document.createElement('div');
                                item.className = 'v-ticker-item';
                                const change = ticker.todaysChangePerc || 0;
                                const changeVal = parseFloat(change).toFixed(2);
                                let changeClass = 'change-zero';
                                if (change > 0) changeClass = 'change-positive';
                                if (change < 0) changeClass = 'change-negative';
                                
                                item.innerHTML = `
                                    <span class="name">${ticker.ticker}</span>
                                    <span class="price">$${parseFloat(ticker.lastTrade.p).toFixed(2)}</span>
                                    <span class="font-mono ${changeClass}">${changeVal > 0 ? '+' : ''}${changeVal}%</span>
                                `;
                                list.appendChild(item);
                            });
                        } else {
                            list.innerHTML = '<p class="loading-text">No market data available.</p>';
                        }
                    })
                    .catch(error => {
                        console.error("Error loading vertical ticker:", error);
                        list.innerHTML = '<p class="loading-text">Error loading feed.</p>';
                    });
            }

            // --- [추가된 팝업 로직] ---
            const hideDate = localStorage.getItem("landing_popup_closed");
            const today = new Date().toISOString().split('T')[0];

            if (hideDate !== today) {
                const popup = document.getElementById("landingPopup");
                if(popup) popup.style.display = "flex";
            }
        });

        // 팝업 닫기 함수
        function closePopup() {
            const popup = document.getElementById("landingPopup");
            const checkbox = document.getElementById("dontShowToday");
            
            if (checkbox && checkbox.checked) {
                const today = new Date().toISOString().split('T')[0];
                localStorage.setItem("landing_popup_closed", today);
            }
            if(popup) popup.style.display = "none";
        }
    </script>

    <script src="{{ url_for('static', filename='js/landing.js') }}" defer></script>
</body>
</html>